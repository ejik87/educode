import telebot
import logging
import config
from telebot import types

bot = telebot.TeleBot(config.TG_TOKEN)  # –°–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞


def main_menu():
    markup = types.InlineKeyboardMarkup(row_width=2)
    btn1 = types.InlineKeyboardButton("–û –Ω–∞—Å", callback_data='about')
    btn2 = types.InlineKeyboardButton("–°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥", callback_data='services')
    btn3 = types.InlineKeyboardButton("–ú–æ–∏ –∑–∞–∫–∞–∑—ã", callback_data='orders')
    btn4 = types.InlineKeyboardButton("–ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data='support', url=config.support_url)
    markup.add(btn1, btn2, btn3, btn4)
    return markup


def services_menu():
    markup = types.InlineKeyboardMarkup()
    btn1 = types.InlineKeyboardButton("–ü—Ä–∏–º–µ—Ä–∫–∞", callback_data='serv_1')
    btn2 = types.InlineKeyboardButton("–ó–∞–∫—É–ø–∫–∏", callback_data='serv_2')
    btn3 = types.InlineKeyboardButton("–í—Å—è–∫–æ–µ —Ä–∞–∑–Ω–æ–µ", callback_data='serv_3')
    btn4 = types.InlineKeyboardButton("–ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ", callback_data='serv_4')
    btn5 = types.InlineKeyboardButton("–ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data='main')
    markup.add(btn1, btn2, btn3, btn4, btn5)
    return markup


def service_menu():
    markup = types.InlineKeyboardMarkup()
    btn1 = types.InlineKeyboardButton("–£—Å–ª–æ–≤–∏—è", callback_data='terms')
    btn2 = types.InlineKeyboardButton("–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞", callback_data='order')
    btn3 = types.InlineKeyboardButton("–ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data='main')
    markup.add(btn1, btn2, btn3)
    return markup


def orders_info():
    ...


def back_menu():
    markup = types.InlineKeyboardMarkup()
    btn1 = types.InlineKeyboardButton("–ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data='main')
    markup.add(btn1)
    return markup


@bot.message_handler(commands=['start', 'help'])
def welcome(message):
    # sticker01 = open('static/welcome.webp', 'rb')  # –û—Ç–∫—Ä—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∏–∫–µ—Ä–∞ —Ä–µ–∂–∏–º —á—Ç–µ–Ω–∏—è –±–∞–π—Ç–æ–≤—ã–π
    # bot.send_sticker(message.chat.id, sticker01)  # –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∏–∫–µ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –∫–æ–º–∞–Ω–¥—ã
    bot.send_message(message.chat.id,
                     f"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {message.from_user.first_name}!\n–Ø - <b>{bot.get_me().first_name}</b>, –±–æ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π —á—Ç–æ–±—ã –±—ã—Ç—å –ø–æ–¥–æ–ø—ã—Ç–Ω—ã–º –∫—Ä–æ–ª–∏–∫–æ–º.",
                     parse_mode='html')
    bot.send_message(message.chat.id, '–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', reply_markup=main_menu())


@bot.message_handler(content_types=['text'])  # –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
def respond_foo(message):
    if message.chat.type == 'private':
        if message.text.lower() == '–ø—Ä–∏–≤–µ—Ç':
            bot.send_message(message.chat.id, '–í–æ—Ç —Ç–µ–±–µ –æ—Ç–≤–µ—Ç!')
    else:
        bot.send_message(message.chat.id, '–Ø –Ω–µ –∑–Ω–∞—é —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å üò¢')


@bot.callback_query_handler(func=lambda call: True)
def callback_inline_menu(call):
    try:
        if call.message:
            match call.data:
                case 'about':
                    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
                                          text="–†–∞–∑–¥–µ–ª –û –Ω–∞—Å!\n–ú—ã —Ö–æ—Ä–æ—à–∏–µ –∏ –∫—Ä–∞—Å–∏–≤—ã–µ –∏ –≤–æ–æ–æ–±—â–µ –æ—á–µ–Ω—å –∫–ª–∞—Å—Å–Ω—ã–µ\n–°–≤—è–∑—å —Å –Ω–∞–º–∏ –ø–æ —Ç–µ–ª–µ–≥—Ä–∞–º–º—É —Ç—É—Ç!",
                                          reply_markup=main_menu())
                case 'services':
                    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
                                          text="–í–æ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥: –¢—Ä–∞—Ç–∞—Ç–∞—Ç–∞—Ç–∞", reply_markup=services_menu())
                    # show alert
                    bot.answer_callback_query(callback_query_id=call.id, show_alert=False,
                                              text="–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —É—Å–ª—É–≥–∞–º–∏ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é")  # show_alert=True –î–∞—ë—Ç –æ–∫–Ω–æ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
                case 'orders':
                    # show alert
                    bot.answer_callback_query(callback_query_id=call.id, show_alert=False, text="–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è...")
                    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
                                          text="–í–æ—Ç –∏—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤", reply_markup=main_menu())
                case 'serv_1':
                    bot.send_message(call.message.chat.id, text='–ü—Ä–∏–º–µ—Ä–∫–∞', reply_markup=service_menu())
                    # bot.answer_callback_query(callback_query_id=call.id, show_alert=False, text="–ö–Ω–æ–ø–∫–∞1 —Ä–∞–±–æ—Ç–∞–µ—Ç...")
                case 'serv_2':
                    bot.send_message(call.message.chat.id, text='–ó–∞–∫—É–ø–∫–∏', reply_markup=service_menu())
                    # bot.answer_callback_query(callback_query_id=call.id, show_alert=False, text="–ö–Ω–æ–ø–∫–∞2 —Ä–∞–±–æ—Ç–∞–µ—Ç...")
                case 'serv_3':
                    bot.send_message(call.message.chat.id, text='–í—Å—è–∫–æ–µ —Ä–∞–∑–Ω–æ–µ', reply_markup=service_menu())
                    # bot.answer_callback_query(callback_query_id=call.id, show_alert=False, text="–ö–Ω–æ–ø–∫–∞3 —Ä–∞–±–æ—Ç–∞–µ—Ç...")
                case 'serv_4':
                    bot.send_message(call.message.chat.id, text='–ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ', reply_markup=service_menu())
                case 'terms':
                    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
                                          text='–ò–Ω—Ñ–æ –∏–∑ —Å–ø–∏—Å–∫–∞ ' + call.data, reply_markup=service_menu())
                case 'order':
                    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
                                          text='–ò–Ω—Ñ–æ –∏–∑ —Å–ø–∏—Å–∫–∞ ' + call.data, reply_markup=service_menu())
                case 'main':
                    bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
                                          text='–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', reply_markup=main_menu())
                case _:
                    pass

            #     bot.delete_message(chat_id=call.message.chat.id,
            #                        message_id=call.message.message_id)  # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â—é—Ö—É —Å –º–µ–Ω—é
            #  –£–¥–∞–ª—è–µ–º inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –º–µ–Ω—é
            # bot.edit_message_text(chat_id=call.message.chat.id, message_id=call.message.message_id,
            #                       text="–í—ã–±–µ—Ä–∏ –∫–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –º–Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å",
            #                       reply_markup=None)
    except Exception as e:
        print(repr(e))


# RUN
bot.polling(none_stop=True)
